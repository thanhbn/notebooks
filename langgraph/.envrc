# LangGraph environment for graph-based AI applications
# Shared environment for ETL, LangFuse, and LangGraph work

# Check if shared virtual environment exists, if not create it
if [[ ! -d "../venv_shared_graph" ]]; then
    echo "Creating shared graph environment..."
    python3 -m venv ../venv_shared_graph
fi

# Activate the shared virtual environment
source ../venv_shared_graph/bin/activate

# Export environment variables for graph development
export PYTHONPATH="${PWD}:${PWD}/..":${PYTHONPATH}"
export PROJECT_ROOT="${PWD}/.."
export ENV_NAME="langgraph"

# LangGraph specific configurations
export LANGGRAPH_TRACING=true
export LANGGRAPH_DEBUG=false
export LANGCHAIN_TRACING_V2=true
export LANGCHAIN_PROJECT="langgraph-tutorials"
export TOKENIZERS_PARALLELISM=false

# Graph development configurations
export GRAPH_VISUALIZATION=true
export GRAPH_OUTPUT_PATH="${PWD}/graphs"
export ASYNC_ENABLED=true

# Cache directories
export HF_HOME="${PWD}/../.cache/huggingface"

# Set Jupyter kernel preference for this directory
export JUPYTER_DEFAULT_KERNEL="graph-env"

echo "üï∏Ô∏è Activated LangGraph environment (venv_shared_graph)"
echo "üìÅ Current directory: ${PWD}"
echo "üêç Python: $(python --version)"
echo "üì¶ Environment: ${ENV_NAME}"
echo "üß† Jupyter kernel: ${JUPYTER_DEFAULT_KERNEL}"
echo "üìä Graph tracing: ${LANGGRAPH_TRACING}"
echo "üé® Visualization: ${GRAPH_VISUALIZATION}"